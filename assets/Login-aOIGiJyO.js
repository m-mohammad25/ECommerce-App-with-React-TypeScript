import{r as g,u as x,j as s,c as j,f as k,d as F,o as H,b as R,q as B,s as D,t as I}from"./index-DkyQ6Cv1.js";import{H as T,a as $}from"./Heading-C4BAuEpa.js";import{z as h,u as P,t as U,I as v}from"./index-8gMisAqh.js";import{A as q,u as z}from"./Anchor-CBKB2Z1o.js";import{g as O,u as V,C as W,F as A}from"./CloseButton-Bc0_QhMe.js";import{R as G,C as J,F as K,S as M}from"./Spinner-Bejatkxa.js";const w=O("h4");w.displayName="DivStyledAsH4";const C=g.forwardRef(({className:r,bsPrefix:e,as:n=w,...t},a)=>(e=x(e,"alert-heading"),s.jsx(n,{ref:a,className:j(r,e),...t})));C.displayName="AlertHeading";const N=g.forwardRef(({className:r,bsPrefix:e,as:n=q,...t},a)=>(e=x(e,"alert-link"),s.jsx(n,{ref:a,className:j(r,e),...t})));N.displayName="AlertLink";const y=g.forwardRef((r,e)=>{const{bsPrefix:n,show:t=!0,closeLabel:a="Close alert",closeVariant:l,className:d,children:m,variant:i="primary",onClose:o,dismissible:u,transition:c=A,...b}=z(r,{show:"onClose"}),p=x(n,"alert"),E=V(L=>{o&&o(!1,L)}),f=c===!0?A:c,S=s.jsxs("div",{role:"alert",...f?void 0:b,ref:e,className:j(d,p,i&&`${p}-${i}`,u&&`${p}-dismissible`),children:[u&&s.jsx(W,{onClick:E,"aria-label":a,variant:l}),m]});return f?s.jsx(f,{unmountOnExit:!0,...b,ref:void 0,in:t,children:S}):t?S:null});y.displayName="Alert";const Q=Object.assign(y,{Link:N,Heading:C}),X=h.object({email:h.string().min(1,{message:"Email is required"}).email({message:"must be a valid email address"}),password:h.string().min(1,{message:"password must be 8 characters at least"})});function Y(){const r=k(),{loading:e,error:n,accessToken:t}=F(c=>c.auth),[a,l]=H(),d=R(),{register:m,handleSubmit:i,formState:{errors:o}}=P({resolver:U(X),mode:"onBlur"}),u=c=>{a.get("message")&&l(""),r(D(c)).unwrap().then(()=>{d("/")})};return g.useEffect(()=>()=>{r(B())},[]),{handleSubmit:i,loading:e,error:n,accessToken:t,formErrors:o,register:m,onSubmit:u,searchParams:a}}function ts(){var i,o;const{handleSubmit:r,loading:e,error:n,accessToken:t,formErrors:a,register:l,onSubmit:d,searchParams:m}=Y();return t?s.jsx(I,{to:"/"}):s.jsxs(s.Fragment,{children:[s.jsx(T,{title:"User Login"}),m.get("message")&&s.jsxs(Q,{variant:"success",children:[" ",m.get("message")]}),s.jsx(G,{children:s.jsx(J,{md:{span:6,offset:3},children:s.jsxs(K,{onSubmit:r(d),children:[s.jsx(v,{label:"Email",name:"email",register:l,error:(i=a.email)==null?void 0:i.message}),s.jsx(v,{label:"Password",name:"password",register:l,error:(o=a.password)==null?void 0:o.message}),s.jsx($,{variant:"info",type:"submit",style:{color:"white"},children:e==="pending"?s.jsxs(s.Fragment,{children:[s.jsx(M,{animation:"border",size:"sm"})," Loading..."," "]}):"Submit"}),s.jsx("p",{style:{color:"#DC3545",marginTop:"10px"},children:n})]})})})]})}export{ts as default};
