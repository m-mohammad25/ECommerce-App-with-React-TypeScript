import{r as o,j as h,K as Te}from"./index-Bq_BoyWd.js";import{g as $,o as ce,s as y,l as ne,C as ye}from"./CloseButton-Bs2BFsBN.js";import{u as m,a as X}from"./useEventCallback-DstjGGbJ.js";import{d as Oe,q as x}from"./DataKey-COGXBUcQ.js";function ot(){return o.useState(null)}function we(){const e=o.useRef(!0),t=o.useRef(()=>e.current);return o.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}function ke(e){const t=o.useRef(null);return o.useEffect(()=>{t.current=e}),t.current}const Me=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",je=typeof document<"u",re=je||Me?o.useLayoutEffect:o.useEffect;function Le(e){const t=o.useRef(e);return t.current=e,t}function Ne(e){const t=Le(e);o.useEffect(()=>()=>t.current(),[])}function oe(e,t){if(e.contains)return e.contains(t);if(e.compareDocumentPosition)return e===t||!!(e.compareDocumentPosition(t)&16)}const ue=o.createContext($?window:void 0);ue.Provider;function Y(){return o.useContext(ue)}function G(e){e===void 0&&(e=ce());try{var t=e.activeElement;return!t||!t.nodeName?null:t}catch{return e.body}}function Ae(e=document){const t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}const se=Oe("modal-open");class q{constructor({ownerDocument:t,handleContainerOverflow:n=!0,isRTL:r=!1}={}){this.handleContainerOverflow=n,this.isRTL=r,this.modals=[],this.ownerDocument=t}getScrollbarWidth(){return Ae(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(t){}removeModalAttributes(t){}setContainerStyle(t){const n={overflow:"hidden"},r=this.isRTL?"paddingLeft":"paddingRight",s=this.getElement();t.style={overflow:s.style.overflow,[r]:s.style[r]},t.scrollBarWidth&&(n[r]=`${parseInt(y(s,r)||"0",10)+t.scrollBarWidth}px`),s.setAttribute(se,""),y(s,n)}reset(){[...this.modals].forEach(t=>this.remove(t))}removeContainerStyle(t){const n=this.getElement();n.removeAttribute(se),Object.assign(n.style,t.style)}add(t){let n=this.modals.indexOf(t);return n!==-1||(n=this.modals.length,this.modals.push(t),this.setModalAttributes(t),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(t){const n=this.modals.indexOf(t);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(t))}isTopModal(t){return!!this.modals.length&&this.modals[this.modals.length-1]===t}}const V=(e,t)=>$?e==null?(t||ce()).body:(typeof e=="function"&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;function Be(e,t){const n=Y(),[r,s]=o.useState(()=>V(e,n==null?void 0:n.document));if(!r){const i=V(e);i&&s(i)}return o.useEffect(()=>{},[t,r]),o.useEffect(()=>{const i=V(e);i!==r&&s(i)},[e,r]),r}function Se({children:e,in:t,onExited:n,mountOnEnter:r,unmountOnExit:s}){const i=o.useRef(null),l=o.useRef(t),d=m(n);o.useEffect(()=>{t?l.current=!0:d(i.current)},[t,d]);const f=X(i,e.ref),c=o.cloneElement(e,{ref:f});return t?c:s||!l.current&&r?null:c}function De(e){return e.code==="Escape"||e.keyCode===27}function We(){const e=o.version.split(".");return{major:+e[0],minor:+e[1],patch:+e[2]}}const Fe=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function Ie(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Pe(e){let{onEnter:t,onEntering:n,onEntered:r,onExit:s,onExiting:i,onExited:l,addEndListener:d,children:f}=e,c=Ie(e,Fe);const{major:E}=We(),T=E>=19?f.props.ref:f.ref,p=o.useRef(null),O=X(p,typeof f=="function"?null:T),g=v=>R=>{v&&p.current&&v(p.current,R)},L=o.useCallback(g(t),[t]),N=o.useCallback(g(n),[n]),A=o.useCallback(g(r),[r]),B=o.useCallback(g(s),[s]),w=o.useCallback(g(i),[i]),S=o.useCallback(g(l),[l]),D=o.useCallback(g(d),[d]);return Object.assign({},c,{nodeRef:p},t&&{onEnter:L},n&&{onEntering:N},r&&{onEntered:A},s&&{onExit:B},i&&{onExiting:w},l&&{onExited:S},d&&{addEndListener:D},{children:typeof f=="function"?(v,R)=>f(v,Object.assign({},R,{ref:O})):o.cloneElement(f,{ref:O})})}const _e=["component"];function Ke(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}const Ge=o.forwardRef((e,t)=>{let{component:n}=e,r=Ke(e,_e);const s=Pe(r);return h.jsx(n,Object.assign({ref:t},s))});function Ve({in:e,onTransition:t}){const n=o.useRef(null),r=o.useRef(!0),s=m(t);return re(()=>{if(!n.current)return;let i=!1;return s({in:e,element:n.current,initial:r.current,isStale:()=>i}),()=>{i=!0}},[e,s]),re(()=>(r.current=!1,()=>{r.current=!0}),[]),n}function He({children:e,in:t,onExited:n,onEntered:r,transition:s}){const[i,l]=o.useState(!t);t&&i&&l(!1);const d=Ve({in:!!t,onTransition:c=>{const E=()=>{c.isStale()||(c.in?r==null||r(c.element,c.initial):(l(!0),n==null||n(c.element)))};Promise.resolve(s(c)).then(E,T=>{throw c.in||l(!0),T})}}),f=X(d,e.ref);return i&&!t?null:o.cloneElement(e,{ref:f})}function ie(e,t,n){return e?h.jsx(Ge,Object.assign({},n,{component:e})):t?h.jsx(He,Object.assign({},n,{transition:t})):h.jsx(Se,Object.assign({},n))}const Ue=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function $e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}let H;function Xe(e){return H||(H=new q({ownerDocument:e==null?void 0:e.document})),H}function Ye(e){const t=Y(),n=e||Xe(t),r=o.useRef({dialog:null,backdrop:null});return Object.assign(r.current,{add:()=>n.add(r.current),remove:()=>n.remove(r.current),isTopModal:()=>n.isTopModal(r.current),setDialogRef:o.useCallback(s=>{r.current.dialog=s},[]),setBackdropRef:o.useCallback(s=>{r.current.backdrop=s},[])})}const le=o.forwardRef((e,t)=>{let{show:n=!1,role:r="dialog",className:s,style:i,children:l,backdrop:d=!0,keyboard:f=!0,onBackdropClick:c,onEscapeKeyDown:E,transition:T,runTransition:p,backdropTransition:O,runBackdropTransition:g,autoFocus:L=!0,enforceFocus:N=!0,restoreFocus:A=!0,restoreFocusOptions:B,renderDialog:w,renderBackdrop:S=a=>h.jsx("div",Object.assign({},a)),manager:D,container:v,onShow:R,onHide:z=()=>{},onExit:de,onExited:J,onExiting:fe,onEnter:he,onEntering:ge,onEntered:me}=e,Ee=$e(e,Ue);const b=Y(),k=Be(v),u=Ye(D),pe=we(),ve=ke(n),[W,Q]=o.useState(!n),M=o.useRef(null);o.useImperativeHandle(t,()=>u,[u]),$&&!ve&&n&&(M.current=G(b==null?void 0:b.document)),n&&W&&Q(!1);const Z=m(()=>{if(u.add(),P.current=ne(document,"keydown",xe),I.current=ne(document,"focus",()=>setTimeout(Re),!0),R&&R(),L){var a,te;const K=G((a=(te=u.dialog)==null?void 0:te.ownerDocument)!=null?a:b==null?void 0:b.document);u.dialog&&K&&!oe(u.dialog,K)&&(M.current=K,u.dialog.focus())}}),F=m(()=>{if(u.remove(),P.current==null||P.current(),I.current==null||I.current(),A){var a;(a=M.current)==null||a.focus==null||a.focus(B),M.current=null}});o.useEffect(()=>{!n||!k||Z()},[n,k,Z]),o.useEffect(()=>{W&&F()},[W,F]),Ne(()=>{F()});const Re=m(()=>{if(!N||!pe()||!u.isTopModal())return;const a=G(b==null?void 0:b.document);u.dialog&&a&&!oe(u.dialog,a)&&u.dialog.focus()}),be=m(a=>{a.target===a.currentTarget&&(c==null||c(a),d===!0&&z())}),xe=m(a=>{f&&De(a)&&u.isTopModal()&&(E==null||E(a),a.defaultPrevented||z())}),I=o.useRef(),P=o.useRef(),Ce=(...a)=>{Q(!0),J==null||J(...a)};if(!k)return null;const ee=Object.assign({role:r,ref:u.setDialogRef,"aria-modal":r==="dialog"?!0:void 0},Ee,{style:i,className:s,tabIndex:-1});let _=w?w(ee):h.jsx("div",Object.assign({},ee,{children:o.cloneElement(l,{role:"document"})}));_=ie(T,p,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:de,onExiting:fe,onExited:Ce,onEnter:he,onEntering:ge,onEntered:me,children:_});let j=null;return d&&(j=S({ref:u.setBackdropRef,onClick:be}),j=ie(O,g,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:j})),h.jsx(h.Fragment,{children:Te.createPortal(h.jsxs(h.Fragment,{children:[j,_]}),k)})});le.displayName="Modal";const st=Object.assign(le,{Manager:q});function qe(e,t){return e.classList?e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function ze(e,t){e.classList?e.classList.add(t):qe(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function ae(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function Je(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=ae(e.className,t):e.setAttribute("class",ae(e.className&&e.className.baseVal||"",t))}const C={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class Qe extends q{adjustAndStore(t,n,r){const s=n.style[t];n.dataset[t]=s,y(n,{[t]:`${parseFloat(y(n,t))+r}px`})}restore(t,n){const r=n.dataset[t];r!==void 0&&(delete n.dataset[t],y(n,{[t]:r}))}setContainerStyle(t){super.setContainerStyle(t);const n=this.getElement();if(ze(n,"modal-open"),!t.scrollBarWidth)return;const r=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";x(n,C.FIXED_CONTENT).forEach(i=>this.adjustAndStore(r,i,t.scrollBarWidth)),x(n,C.STICKY_CONTENT).forEach(i=>this.adjustAndStore(s,i,-t.scrollBarWidth)),x(n,C.NAVBAR_TOGGLER).forEach(i=>this.adjustAndStore(s,i,t.scrollBarWidth))}removeContainerStyle(t){super.removeContainerStyle(t);const n=this.getElement();Je(n,"modal-open");const r=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";x(n,C.FIXED_CONTENT).forEach(i=>this.restore(r,i)),x(n,C.STICKY_CONTENT).forEach(i=>this.restore(s,i)),x(n,C.NAVBAR_TOGGLER).forEach(i=>this.restore(s,i))}}let U;function it(e){return U||(U=new Qe(e)),U}const Ze=o.createContext({onHide(){}}),at=o.forwardRef(({closeLabel:e="Close",closeVariant:t,closeButton:n=!1,onHide:r,children:s,...i},l)=>{const d=o.useContext(Ze),f=m(()=>{d==null||d.onHide(),r==null||r()});return h.jsxs("div",{ref:l,...i,children:[s,n&&h.jsx(ye,{"aria-label":e,variant:t,onClick:f})]})});export{at as A,st as B,Ze as M,ot as a,Y as b,oe as c,ke as d,re as e,Qe as f,it as g,Ne as h,we as u};
