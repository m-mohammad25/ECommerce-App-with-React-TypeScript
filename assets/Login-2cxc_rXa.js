import{r as p,u as x,j as s,c as j,f as k,d as F,o as H,b as R,q as B,s as D,t as I}from"./index-Bq_BoyWd.js";import{H as T}from"./style-qmAhOpjk.js";import"./style-C5DDRcX9.js";import{z as h,u as $,t as P,I as v}from"./index-BMT5gYsc.js";import{u as U}from"./hook-Bp8KkYv3.js";import{u as q}from"./useEventCallback-DstjGGbJ.js";import{f as z,C as O,F as A}from"./CloseButton-Bs2BFsBN.js";import{A as V}from"./Anchor-CvsOSrLX.js";import{R as W,C as G}from"./Row-190GaXY8.js";import{F as J,S as K}from"./Spinner-DopUcn5i.js";import{B as M}from"./Button-eU2eWRp9.js";import"./Button-DpFDe-S0.js";const w=z("h4");w.displayName="DivStyledAsH4";const C=p.forwardRef(({className:a,bsPrefix:e,as:o=w,...t},r)=>(e=x(e,"alert-heading"),s.jsx(o,{ref:r,className:j(a,e),...t})));C.displayName="AlertHeading";const N=p.forwardRef(({className:a,bsPrefix:e,as:o=V,...t},r)=>(e=x(e,"alert-link"),s.jsx(o,{ref:r,className:j(a,e),...t})));N.displayName="AlertLink";const y=p.forwardRef((a,e)=>{const{bsPrefix:o,show:t=!0,closeLabel:r="Close alert",closeVariant:l,className:d,children:m,variant:n="primary",onClose:i,dismissible:u,transition:c=A,...b}=U(a,{show:"onClose"}),f=x(o,"alert"),E=q(L=>{i&&i(!1,L)}),g=c===!0?A:c,S=s.jsxs("div",{role:"alert",...g?void 0:b,ref:e,className:j(d,f,n&&`${f}-${n}`,u&&`${f}-dismissible`),children:[u&&s.jsx(O,{onClick:E,"aria-label":r,variant:l}),m]});return g?s.jsx(g,{unmountOnExit:!0,...b,ref:void 0,in:t,children:S}):t?S:null});y.displayName="Alert";const Q=Object.assign(y,{Link:N,Heading:C}),X=h.object({email:h.string().min(1,{message:"Email is required"}).email({message:"must be a valid email address"}),password:h.string().min(1,{message:"password must be 8 characters at least"})});function Y(){const a=k(),{loading:e,error:o,accessToken:t}=F(c=>c.auth),[r,l]=H(),d=R(),{register:m,handleSubmit:n,formState:{errors:i}}=$({resolver:P(X),mode:"onBlur"}),u=c=>{r.get("message")&&l(""),a(D(c)).unwrap().then(()=>{d("/")})};return p.useEffect(()=>()=>{a(B())},[]),{handleSubmit:n,loading:e,error:o,accessToken:t,formErrors:i,register:m,onSubmit:u,searchParams:r}}function cs(){var n,i;const{handleSubmit:a,loading:e,error:o,accessToken:t,formErrors:r,register:l,onSubmit:d,searchParams:m}=Y();return t?s.jsx(I,{to:"/"}):s.jsxs(s.Fragment,{children:[s.jsx(T,{title:"User Login"}),m.get("message")&&s.jsxs(Q,{variant:"success",children:[" ",m.get("message")]}),s.jsx(W,{children:s.jsx(G,{md:{span:6,offset:3},children:s.jsxs(J,{onSubmit:a(d),children:[s.jsx(v,{label:"Email",name:"email",register:l,error:(n=r.email)==null?void 0:n.message}),s.jsx(v,{label:"Password",name:"password",register:l,error:(i=r.password)==null?void 0:i.message}),s.jsx(M,{variant:"info",type:"submit",style:{color:"white"},children:e==="pending"?s.jsxs(s.Fragment,{children:[s.jsx(K,{animation:"border",size:"sm"})," Loading..."," "]}):"Submit"}),s.jsx("p",{style:{color:"#DC3545",marginTop:"10px"},children:o})]})})})]})}export{cs as default};
