import{j as t,f as p,r as i,x as d,y as x,d as f,z as y,A as C,B as h}from"./index-BWZp9pjs.js";import{H as j}from"./Heading-C02lxtKi.js";import{C as g,L as I}from"./CartItem-DnD4rIt_.js";import"./Spinner-ybkc4c84.js";import"./CloseButton-Dna98v46.js";import"./AbstractModalHeader-D4MSus0Q.js";const b="_container_1qh56_1",q={container:b};function v({products:e}){const n=e.reduce((r,a)=>a.quantity&&typeof a.quantity=="number"?r+a.price*a.quantity:r,0);return t.jsxs("div",{className:q.container,children:[t.jsx("span",{children:"Subtotal:"}),t.jsxs("span",{children:[n,"$"]})]})}function H({products:e,changeQuantityHandler:n,removeCartItem:r}){const a=e.map(o=>t.jsx(g,{...o,changeQuantityHandler:n,removeCartItem:r},o.id));return t.jsx("div",{children:a})}function F(){const e=p(),n=i.useCallback((s,l)=>{e(d({id:s,quantity:l}))},[e]),r=i.useCallback(s=>{e(x(s))},[e]),{items:a,loading:o,error:c,productsFullInfo:u}=f(s=>s.cart),m=u.map(s=>({...s,quantity:a[s.id]}));return i.useEffect(()=>{const s=e(y());return()=>{s.abort(),e(C())}},[e]),{loading:o,error:c,products:m,changeQuantityHandler:n,removeCartItem:r}}function k(){const{loading:e,error:n,products:r,changeQuantityHandler:a,removeCartItem:o}=F();return t.jsxs(t.Fragment,{children:[t.jsx(j,{title:"Cart"}),t.jsx(I,{status:e,error:n,type:"cart",children:r.length?t.jsxs(t.Fragment,{children:[t.jsx(H,{products:r,changeQuantityHandler:a,removeCartItem:o}),t.jsx(v,{products:r})]}):t.jsx(h,{type:"emptyCart",message:"Your cart is empty"})})]})}export{k as default};
